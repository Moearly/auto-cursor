# Cursor 自定义路径配置指南

## 🎯 功能概述

当自动检测无法找到 Windows 上的 Cursor 安装路径时，你现在可以手动指定 Cursor 的安装路径。这个功能确保在任何安装环境下都能正常使用完全重置功能。

## 🚀 使用方法

### 1. **进入路径配置**
- 在 Machine ID 管理页面，点击"📁 自定义Cursor路径"按钮
- 进入自定义路径配置界面

### 2. **自动检测并填充**
- 点击"🔍 自动检测并填充"按钮
- 系统会自动搜索所有可能的 Cursor 安装位置
- 如果找到有效路径，会自动填充到输入框

### 3. **手动设置路径**
- 在输入框中输入 Cursor 的 `resources/app` 目录完整路径
- 例如: `C:\Users\用户名\AppData\Local\Programs\Cursor\resources\app`
- 点击"💾 保存路径"

### 4. **路径验证**
- 系统会自动验证路径的有效性
- 检查 `package.json`、`main.js`、`workbench.js` 文件是否存在
- 显示验证结果

## 🔍 路径查找工具

### **调试所有可能路径**
点击"🔍 查看所有可能路径"可以查看：
- 系统检查的所有路径位置
- 每个路径下文件的存在状态
- 详细的调试信息

### **支持的 Windows 路径类型**
1. **用户安装**: `%LOCALAPPDATA%\Programs\Cursor\resources\app`
2. **系统安装**: `C:\Program Files\Cursor\resources\app`
3. **32位系统**: `C:\Program Files (x86)\Cursor\resources\app`
4. **直接安装**: `%LOCALAPPDATA%\Cursor\resources\app`
5. **便携版**: `C:\Cursor\resources\app`
6. **其他用户目录**: `%USERPROFILE%\AppData\Local\Programs\Cursor\resources\app`

## 💡 使用场景

### **何时需要自定义路径？**
- ✅ 自动检测失败时
- ✅ Cursor 安装在非标准位置
- ✅ 使用便携版 Cursor
- ✅ 企业环境特殊安装路径
- ✅ 多个 Cursor 版本共存

### **如何确定正确路径？**
1. **查找 Cursor 快捷方式目标**
2. **在路径末尾添加 `\resources\app`**
3. **确保该目录包含 `package.json` 文件**

## 🛠️ 技术实现

### **路径优先级**
1. **自定义路径** - 优先使用用户设置的路径
2. **自动检测** - 搜索标准安装位置
3. **默认路径** - 最常见的安装路径

### **路径验证机制**
```
路径验证步骤:
1. 检查目录是否存在
2. 验证 package.json 文件
3. 验证 main.js 文件  
4. 验证 workbench.desktop.main.js 文件
```

### **配置存储**
- 自定义路径保存在 `custom_cursor_path.txt` 文件中
- 文件位置与应用程序可执行文件同目录
- 支持清除配置回到自动检测模式

## 📱 界面功能

### **主要按钮**
- **💾 保存路径**: 保存并验证自定义路径
- **🔍 自动检测并填充**: 自动找到并填充有效路径
- **🗑️ 清除自定义路径**: 删除自定义配置，回到自动检测
- **🔍 查看所有可能路径**: 显示详细的路径调试信息

### **状态显示**
- **当前状态**: 显示是否已设置自定义路径
- **路径预览**: 显示当前使用的路径
- **验证结果**: 显示路径验证的详细信息

## 🔧 故障排除

### **常见问题**
1. **路径设置后仍然找不到文件**
   - 确认路径指向 `resources/app` 目录
   - 检查路径中是否有多余的斜杠或空格

2. **自动检测没有找到路径**
   - 尝试在 Cursor 安装目录中手动查找 `resources/app`
   - 使用调试工具查看系统搜索的所有位置

3. **路径验证失败**
   - 确认 Cursor 已正确安装
   - 检查文件权限是否正确

### **调试方法**
1. **使用路径调试工具**查看详细信息
2. **查看日志文件**了解具体错误
3. **检查 Cursor 安装完整性**

## 🎉 优势

- ✅ **万无一失**: 即使自动检测失败也能正常工作
- ✅ **用户友好**: 简单的界面和自动填充功能
- ✅ **详细验证**: 实时验证路径有效性
- ✅ **灵活配置**: 支持任意安装位置
- ✅ **调试工具**: 丰富的诊断功能

现在无论 Cursor 安装在 Windows 的哪个位置，都能通过自定义路径功能确保完全重置功能正常工作！
